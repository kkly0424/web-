# 框架设计与概述

### 权衡的艺术

#### 编程的范式：

编程的范式是指某种编程语言典型的编程风格或编程方式。四种常见的范式：面向过程编程、面向对象编程、函数式编程、结构化编程。

#### 命令式框架:

命令式框架的一大特点就是关注过程。

#### 声明式框架：

声明式框架更加关注结果。

#### 性能与可维护性：

声明式代码的性能不优于命令式代码。声明式代码可维护性更强，性能和可维护性选择上，优先可维护性。

涉及DOM的运算要远比JavaScript层面的计算性能差，虚拟DOM，是为了最小化找出差异这一步的性能消耗而出现的。

#### 运行时和编译时：

纯运行时：用户只能编写可以直接运行的代码。

运行时+编译时：既可以写直接运行的代码，也可以编写通过编译后再运行的代码。

纯编译时：用户的代码只能通过编译后才能运行。

**Render函数：**通常情况下，使用template标签创建html代码（template最终也要编译成render函数），而有时候，则会通过JavaScript代码来实现创建html代码，媒介就是render函数。render函数返回的是虚拟的节点，挂载mouted后会被渲染到页面成为真实的节点。

```javascript
render(createElement) {
    //第一个参数为html标签元素，第二个参数为该元素所有的属性对象集合，第三个参数为该元素的内容
    return createElement('div', {id:'app'}, "Hello World!!!");
  }
```

### Tree-Shaking

含义：消除那些永远不会被执行的代码，也就是排除dead code，rollup.js和webpack都支持Tree-shaking。

实现条件：要实现Tree-shaking，必须满足一个条件，即模块必须是ESM（ES Module），**因为Tree-shaking依赖ESM的静态结构**。

Tree-Shaking会移除的代码：

1. 被注释掉的代码
2. 永远不会被执行的代码
3. 没有被导入的代码
4. 导入但未被引用的代码
5. 无副作用并且没有发生实际作用的代码
6. 将函数调用标记为无副作用（/*#__PURE__*/)并且没有发生实际作用的代码

**副作用：**当调用函数的时候会对外部产生影响，如修改了全局的变量。如果一个函数调用时会产生副作用，那么Tree-shaking就不会将该函数调用移除。
